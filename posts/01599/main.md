<h1 style="font-size: 250%;">ロボットシステム学</h1>-c-c-c-<h2>第4回</h2>-c-c-c-上田 隆一-c-c-c--c-c-c-2016年9月?日\@千葉工業大学-c-c-c--c-c-c-<!--nextpage-->-c-c-c-<h2>今日の内容</h2>-c-c-c-<ul>-c-c-c- 	<li>プロセス等、Linuxの仕組みについて-c-c-c-<ul>-c-c-c- 	<li>OSなしのマイコンとの違いは何か？</li>-c-c-c-</ul>-c-c-c-</li>-c-c-c-</ul>-c-c-c-<!--nextpage-->-c-c-c-<h2>プロセス</h2>-c-c-c-<ul>-c-c-c- 	<li>プログラム実行の一単位-c-c-c-<ul>-c-c-c- 	<li>実行中のプログラム＋OSが準備した付帯情報</li>-c-c-c-</ul>-c-c-c-</li>-c-c-c- 	<li>プロセスID、ユーザ、親プロセス-c-c-c-<ul>-c-c-c- 	<li>普段はps(1)やtop(1)で調査</li>-c-c-c- 	<li>CPUやメモリ使用量、ゴミプロセスがないか調査、等</li>-c-c-c-</ul>-c-c-c-</li>-c-c-c- 	<li>一つのプロセスについて調査したければ/proc/&lt;プロセス番号&gt;を見る-c-c-c-<ul>-c-c-c- 	<li>プロセス情報もファイルで提供される。なんでもファイル</li>-c-c-c-</ul>-c-c-c-</li>-c-c-c-</ul>-c-c-c-<!--nextpage-->-c-c-c-<h2>カーネルから見たプロセス</h2>-c-c-c-<ul>-c-c-c- 	<li>リソースを割り当てる一単位-c-c-c-<ul>-c-c-c- 	<li>メモリの割り当て</li>-c-c-c- 	<li>プログラムが自身のプロセス外のメモリを参照しないよう保護</li>-c-c-c- 	<li>仮想アドレス空間</li>-c-c-c- 	<li>CPU の利用時間（タイムシェアリング）</li>-c-c-c- 	<li>優先度の高低を考慮-c-c-c-<ul>-c-c-c- 	<li>端末とのやり取りが多いものほど高頻度-c-c-c-<span style="color: #ffff00;">↑ロボットを動かす時に問題となる</span></li>-c-c-c-</ul>-c-c-c-</li>-c-c-c-</ul>-c-c-c-</li>-c-c-c-</ul>-c-c-c-<!--nextpage-->-c-c-c-<h2>プロセスツリー</h2>-c-c-c-<ul>-c-c-c- 	<li>プロセスはプロセスから生まれる-c-c-c-<ul>-c-c-c- 	<li>fork-execと呼ばれる仕組み</li>-c-c-c- 	<li>家系図（プロセスツリー）ができる-c-c-c-<ul>-c-c-c- 	<li>pstree(1)で調査を</li>-c-c-c- 	<li>initというプロセスからぶら下がる</li>-c-c-c-</ul>-c-c-c-</li>-c-c-c-</ul>-c-c-c-</li>-c-c-c- 	<li>プロセスツリーの役割-c-c-c-<ul>-c-c-c- 	<li>親子間で環境や開いているファイルを引き継ぐ</li>-c-c-c-</ul>-c-c-c-</li>-c-c-c-</ul>-c-c-c-<h2><!--nextpage--></h2>-c-c-c-<h2>プロセスの一生</h2>-c-c-c-<ol>-c-c-c- 	<li>あるプロセスからforkして生まれる</li>-c-c-c- 	<li>新しいプロセスIDをもらう</li>-c-c-c- 	<li>親の情報をすべて自分のメモリ空間にコピー（コピーしない場合もある）</li>-c-c-c- 	<li>（execされた場合）プログラムの部分が入れ替わる-c-c-c-<ul>-c-c-c- 	<li>例: <a href="https://gist.github.com/ryuichiueda/063765e1e0d8b1e8a501" target="_blank">execを行うシェルスクリプト</a></li>-c-c-c-</ul>-c-c-c-</li>-c-c-c- 	<li>プログラム実行</li>-c-c-c- 	<li>終了。終了ステータスを返す-c-c-c-<ul>-c-c-c- 	<li>0が正常終了、1が何らかの異常</li>-c-c-c-</ul>-c-c-c-</li>-c-c-c-</ol>-c-c-c-<h2><!--nextpage--></h2>-c-c-c-<h2>プロセスとメモリ</h2>-c-c-c-<ul>-c-c-c- 	<li>プロセスは、基本的に他のプロセスが使っているメモリの中身を見ることができない-c-c-c-<ul>-c-c-c- 	<li><span style="color: #ffff00;">見ることができたら事故</span></li>-c-c-c-</ul>-c-c-c-</li>-c-c-c- 	<li>プロセス間でメモリが見えないようにする仕組み: 仮想記憶-c-c-c-<ul>-c-c-c- 	<li>問題: 右のような1列のメモリをどのように複数のプロセスに割り当てる？<a href="https://lab.ueda.asia/wp-content/uploads/2016/09/mem_sequence.png"><img class="alignright size-full wp-image-1598" src="https://lab.ueda.asia/wp-content/uploads/2016/09/mem_sequence.png" alt="mem_sequence" width="222" height="233" /></a></li>-c-c-c-</ul>-c-c-c-</li>-c-c-c-</ul>
